<!DOCTYPE html>
<html lang="ku">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>zand cafe</title>

<style>
*{box-sizing:border-box}
body{
 font-family:sans-serif;
 background:linear-gradient(135deg,#133f24,#0f6630);
 padding:20px
}
.container{
 max-width:1300px;
 margin:auto;
 background:cornsilk;
 padding:20px;
 border-radius:15px;
 box-shadow:0 10px 30px rgba(0,0,0,.1)
}
.hidden{display:none}
h2{text-align:center}

.login{
 max-width:800px;
 height:300px;
 margin:100px auto;
 background:cornsilk;
 padding:25px;
 border-radius:15px;
 box-shadow:0 10px 30px rgba(0,0,0,.15)
}

label{font-weight:bold;margin-top:12px;display:block}
input, select{padding:10px;width:100%;margin-top:5px;border-radius:8px;border:1px solid #ccc}

.buttons{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(110px,1fr));
 gap:8px;
 margin-top:8px
}

button{
 padding:10px;
 border:none;
 border-radius:10px;
 cursor:pointer;
 transition:.25s;
 font-weight:bold
}

.type-btn.coffee{background:#86654d;color:#fff}
.type-btn.food{background:#e4a93c;color:#fff}
.type-btn.sweet{background:#d8ba0d;color:#fff}
.type-btn.drink{background:#3686e2;color:#fff}
.type-btn.active{box-shadow:0 0 10px #000 inset}

.price-btn{background:#43ac62;color:#fff}
.price-btn.active{background:#0f8305}

.pay-btn{background:#eceff1}
.pay-btn.active.cash{background:#4caf50;color:#fff}
.pay-btn.active.debt{background:#f44336;color:#fff}

.add-btn{
 background:linear-gradient(135deg,#4caf50,#2e7d32);
 color:#fff;
 width:100%;
 margin-top:15px;
 font-size:16px
}

table{
 width:100%;
 border-collapse:collapse;
 margin-top:20px;
 border-radius:10px;
 overflow:hidden
}
th,td{padding:8px;border-bottom:1px solid #eee;text-align:center}
th{background:#f5f5f5}

.cash-row{background:#e8f5e9;color:#2e7d32;font-weight:bold}
.debt-row{background:#ffebee;color:#c62828;font-weight:bold}

.toggle-btn{background:#9c27b0;color:#fff}
.del-btn{background:#f44336;color:#fff}

.total,.report,.debt-box{
 margin-top:15px;
 padding:10px;
 border-radius:10px;
 background:#fafafa;
 font-weight:bold
}
</style>
</head>

<body>

<div id="loginBox" class="login">
<h2>ğŸ” Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±</h2>
<input type="password" id="password" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
<button class="add-btn" onclick="login()">Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±</button>
</div>

<div id="app" class="container hidden">
<h2>â˜• zand cafe</h2>

<label>Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø±</label>
<input id="customer">

<label>Ø¬Û†Ø±ÛŒ Ø´Øª</label>
<b>â˜• Ø®ÙˆØ§Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ú¯Û•Ø±Ù…</b>
<div class="buttons">
<button class="type-btn coffee active" onclick="setType('Ù‚Ø§ÙˆÛ•',this)">Ù‚Ø§ÙˆÛ•</button>
<button class="type-btn coffee" onclick="setType('Ú©Ø§Ù¾ÙˆÚ†ÛŒÙ†Û†',this)">Ú©Ø§Ù¾ÙˆÚ†ÛŒÙ†Û†</button>
<button class="type-btn coffee" onclick="setType('Ø¦Û•Ù…ÛØ±ÛŒÚ©Ø§Ù†Û†',this)">Ø¦Û•Ù…ÛØ±ÛŒÚ©Ø§Ù†Û†</button>
<button class="type-btn coffee" onclick="setType('Ù‡Û†Øª Ú†ÙˆÚ©Ù„ÛØª',this)">Ù‡Û†Øª Ú†ÙˆÚ©Ù„ÛØª</button>
<button class="type-btn coffee" onclick="setType('Ú†Ø§',this)">Ú†Ø§</button>
</div>

<b>ğŸ• Ø®ÙˆØ§Ø±Ø¯Ù†</b>
<div class="buttons">
<button class="type-btn food" onclick="setType('Ù¾ÛŒØªØ²Ø§',this)">Ù¾ÛŒØªØ²Ø§</button>
<button class="type-btn food" onclick="setType('Ø¬Ø¨Ø³',this)">Ø¬Ø¨Ø³</button>
<button class="type-btn food" onclick="setType('Ù¾Ø³Ú©ÛŒØª',this)">Ù¾Ø³Ú©ÛŒØª</button>
<button class="type-btn food" onclick="setType('Ú†Û•Ø±Û•Ø³',this)">Ú†Û•Ø±Û•Ø³</button>
</div>

<b>ğŸ° Ø´ÛŒØ±ÛŒÙ†ÛŒ</b>
<div class="buttons">
<button class="type-btn sweet" onclick="setType('Ú©ÛÚ©',this)">Ú©ÛÚ©</button>
<button class="type-btn sweet" onclick="setType('Ù…Ø­Û•Ù„Û•Ø¨ÛŒ',this)">Ù…Ø­Û•Ù„Û•Ø¨ÛŒ</button>
<button class="type-btn sweet" onclick="setType('ØªÙˆØ±ØªÛ•',this)">ØªÙˆØ±ØªÛ•</button>
<button class="type-btn sweet" onclick="setType('Ú©Ù„ÛØ±',this)">Ú©Ù„ÛØ±</button>
</div>

<b>ğŸ¥¤ Ø®ÙˆØ§Ø±Ø¯Ù†Û•ÙˆÛ•</b>
<div class="buttons">
<button class="type-btn drink" onclick="setType('Ù¾Ø±ØªÛ•Ù‚Ø§Úµ',this)">Ù¾Ø±ØªÛ•Ù‚Ø§Úµ</button>
<button class="type-btn drink" onclick="setType('Ø´ÛŒØ±Ù…Û†Ø²',this)">Ø´ÛŒØ±Ù…Û†Ø²</button>
<button class="type-btn drink" onclick="setType('Ù…Û†Ú©ØªÛÙ„',this)">Ù…Û†Ú©ØªÛÙ„</button>
<button class="type-btn drink" onclick="setType('Ø³Ø§Ø±Ø¯ÛŒ',this)">Ø³Ø§Ø±Ø¯ÛŒ</button>
<button class="type-btn drink" onclick="setType('Ø¦Ø§Ùˆ',this)">Ø¦Ø§Ùˆ</button>
<button class="type-btn drink" onclick="setType('Energy',this)">Energy</button>
</div>

<input type="hidden" id="type" value="Ù‚Ø§ÙˆÛ•">

<label>Ù†Ø±Ø®Û• Ø¨Ù†Ú†ÛŒÙ†Û•Ú©Ø§Ù†</label>
<div class="buttons">
<button class="price-btn" onclick="setPrice(250,this)">250</button>
<button class="price-btn" onclick="setPrice(500,this)">500</button>
<button class="price-btn" onclick="setPrice(750,this)">750</button>
<button class="price-btn" onclick="setPrice(1000,this)">1000</button>
<button class="price-btn" onclick="setPrice(1250,this)">1250</button>
<button class="price-btn" onclick="setPrice(1500,this)">1500</button>
<button class="price-btn" onclick="setPrice(2000,this)">2000</button>
<button class="price-btn" onclick="setPrice(2250,this)">2250</button>
<button class="price-btn" onclick="setPrice(2500,this)">2500</button>
<button class="price-btn" onclick="setPrice(3000,this)">3000</button>
</div>

<label>ÛŒØ§Ù† Ù†Ø±Ø®ÛŒ Ø¯ÚµØ®ÙˆØ§Ø²</label>
<input type="number" id="price">

<label>Ù¾Ø§Ø±Û•Ø¯Ø§Ù†</label>
<div class="buttons">
<button class="pay-btn active cash" onclick="setPayment('Ù†Û•Ù‚Ø¯',this)">Ù†Û•Ù‚Ø¯</button>
<button class="pay-btn" onclick="setPayment('Ù‚Û•Ø±Ø²',this)">Ù‚Û•Ø±Ø²</button>
</div>
<input type="hidden" id="payment" value="Ù†Û•Ù‚Ø¯">

<label>Ú•Û†Ú˜ Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•</label>
<select id="daySelect" onchange="render()"></select>

<button class="add-btn" onclick="addItem()">â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>

<table>
<thead>
<tr>
<th>Ú•Û†Ú˜</th><th>Ú©Ø§Øª</th><th>Ú©Ú•ÛŒØ§Ø±</th><th>Ø¬Û†Ø±</th>
<th>Ù†Ø±Ø®</th><th>Ù¾Ø§Ø±Û•Ø¯Ø§Ù†</th><th>Ú¯Û†Ú•ÛŒÙ†</th><th>Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<div class="total">
Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="total">0</span> |
ğŸŸ¢ Ù†Û•Ù‚Ø¯: <span id="cash">0</span> |
ğŸ”´ Ù‚Û•Ø±Ø²: <span id="debt">0</span>
</div>

<div class="debt-box">
ğŸ“Œ Ù„ÛŒØ³ØªÛŒ Ù‚Û•Ø±Ø²
<div style="margin:5px 0; font-weight:bold;">
  Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ Ù‚Û•Ø±Ø²: <span id="totalDebt">0</span>
</div>
<div style="margin:10px 0;">
  <button onclick="showDebt('day')">Ú•Û†Ú˜</button>
  <button onclick="showDebt('month')">Ù…Ø§Ù†Ú¯</button>
  <button onclick="showDebt('all')">Ù‡Û•Ù…ÙˆÙˆ</button>
</div>
<ul id="debtList"></ul>
</div>

<div class="report">
ğŸ“Š Ú•Ø§Ù¾Û†Ø±ØªÛŒ Ù…Ø§Ù†Ú¯Ø§Ù†Û•<br>
<select id="monthSelect" onchange="monthlyReport()"></select>
<div id="monthResult"></div>
</div>

</div>

<script>
const PASSWORD="1234";
let data=JSON.parse(localStorage.getItem("qawaData"))||[];
let debtFilter = 'day'; 

function login(){
 if(password.value===PASSWORD){
  loginBox.classList.add("hidden");
  app.classList.remove("hidden");
  initMonths();
  initDays();
  render();
 }else alert("Ù¾Ø§Ø³Û†Ø±Ø¯ Ù‡Û•ÚµÛ•ÛŒÛ•");
}

function setType(v,btn){
 type.value=v;
 document.querySelectorAll(".type-btn").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
}

function setPrice(v,btn){
 price.value=v;
 document.querySelectorAll(".price-btn").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
}

function setPayment(v,btn){
 payment.value=v;
 document.querySelectorAll(".pay-btn").forEach(b=>b.classList.remove("active","cash","debt"));
 btn.classList.add("active",v==="Ù†Û•Ù‚Ø¯"?"cash":"debt");
}

function addItem(){
 if(!price.value)return alert("Ù†Ø±Ø® Ø¨Ù†ÙˆÙˆØ³Û•");
 let d=new Date();
 data.unshift({
  date:d.toLocaleDateString(),
  month:d.getFullYear()+"-"+(d.getMonth()+1),
  time:d.toLocaleTimeString(),
  customer:customer.value||"â€”",
  type:type.value,
  price:+price.value,
  payment:payment.value
 });
 localStorage.setItem("qawaData",JSON.stringify(data));

 customer.value="";
 price.value="";
 document.querySelectorAll(".price-btn").forEach(b=>b.classList.remove("active"));

 initMonths();
 initDays();
 render();
 monthlyReport();
}

function togglePayment(i){
 data[i].payment=data[i].payment==="Ù‚Û•Ø±Ø²"?"Ù†Û•Ù‚Ø¯":"Ù‚Û•Ø±Ø²";
 localStorage.setItem("qawaData",JSON.stringify(data));
 render(); monthlyReport();
}

function deleteItem(i){
 data.splice(i,1);
 localStorage.setItem("qawaData",JSON.stringify(data));
 render(); monthlyReport();
}

function showDebt(filter){
    debtFilter = filter;
    render();
}

function render(){
 let selectedDay = daySelect.value;
 list.innerHTML=""; 
 debtList.innerHTML="";
 let total=0, cash=0, debt=0;

 let dayData = data.filter(x => x.date === selectedDay);

 dayData.forEach((x)=>{
    let realIndex = data.indexOf(x);

    total += x.price;
    if(x.payment === "Ù‚Û•Ø±Ø²") debt += x.price;
    else cash += x.price;

    list.innerHTML += `
    <tr class="${x.payment==="Ù‚Û•Ø±Ø²"?"debt-row":"cash-row"}">
     <td>${x.date}</td><td>${x.time}</td>
     <td>${x.customer}</td><td>${x.type}</td>
     <td>${x.price}</td><td>${x.payment}</td>
     <td><button class="toggle-btn" onclick="togglePayment(${realIndex})">ğŸ”</button></td>
     <td><button class="del-btn" onclick="deleteItem(${realIndex})">âŒ</button></td>
    </tr>`;
 });

let debtData;
if(debtFilter==='day'){
    debtData = dayData.filter(x => x.payment === "Ù‚Û•Ø±Ø²");
}else if(debtFilter==='month'){
    let selectedMonth = monthSelect.value;
    debtData = data.filter(x => x.payment === "Ù‚Û•Ø±Ø²" && x.month===selectedMonth);
}else{
    debtData = data.filter(x => x.payment === "Ù‚Û•Ø±Ø²");
}

let totalDebtAmount = debtData.reduce((sum, x) => sum + x.price, 0);
totalDebt.innerText = totalDebtAmount;

/* ğŸ”½ ØªÛ•Ù†Ù‡Ø§ Ø¦Û•Ù… Ø¨Û•Ø´Û• Ù†ÙˆÛÛŒÛ•: Ú©Û†Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ù‚Û•Ø±Ø² Ø¨Û† Ù‡Û•Ø± Ú©Ú•ÛŒØ§Ø±ÛÚ© */
let grouped = {};
debtData.forEach(x=>{
  if(!grouped[x.customer]) grouped[x.customer]=0;
  grouped[x.customer] += x.price;
});

for(let name in grouped){
  debtList.innerHTML += `<li style="color:red;font-weight:bold">
    ${name} : ${grouped[name]}
  </li>`;
}

total.innerText = total;
cash.innerText = cash;
debt.innerText = debt;
}

function initMonths(){
 let m=[...new Set(data.map(x=>x.month))];
 monthSelect.innerHTML=m.map(x=>`<option>${x}</option>`).join("");
}

function initDays(){
 let days = [...new Set(data.map(x=>x.date))].sort((a,b)=> new Date(b)-new Date(a));
 daySelect.innerHTML = days.map(d=>`<option>${d}</option>`).join("");
}

function monthlyReport(){
 let m=monthSelect.value,t=0,c=0,d=0;
 data.filter(x=>x.month===m).forEach(x=>{
  t+=x.price;
  x.payment==="Ù‚Û•Ø±Ø²"?d+=x.price:c+=x.price;
 });
 monthResult.innerHTML=`Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${t}<br>Ù†Û•Ù‚Ø¯: ${c}<br>Ù‚Û•Ø±Ø²: ${d}`;
}
</script>

</body>
</html>
